--- buggy+++ fixed@@ -367,7 +367,7 @@         return true;
     if (tok1->str() == "-" && !tok1->astOperand2())
         return isSameExpression(cpp, true, tok1->astOperand1(), tok2, library, pure);
-    if (tok2->str() == "-" && !tok1->astOperand2())
+    if (tok2->str() == "-" && !tok2->astOperand2())
         return isSameExpression(cpp, true, tok2->astOperand1(), tok1, library, pure);
     return false;
 }
