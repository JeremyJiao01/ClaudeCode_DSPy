--- buggy+++ fixed@@ -91,7 +91,7 @@ 
   bool isConditionImplied(SmallVector<int64_t, 8> R) const;
 
-  ArrayRef<int64_t> getLastConstraint() { return Constraints[0]; }
+  ArrayRef<int64_t> getLastConstraint() { return Constraints.back(); }
   void popLastConstraint() { Constraints.pop_back(); }
   void popLastNVariables(unsigned N) {
     for (auto &C : Constraints) {
