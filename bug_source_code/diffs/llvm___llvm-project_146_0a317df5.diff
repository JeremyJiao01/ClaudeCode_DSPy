--- buggy+++ fixed@@ -867,6 +867,11 @@     if (char V = isNegatibleForFree(Op.getOperand(0), LegalOperations, TLI,
                                     Options, ForCodeSize, Depth + 1))
       return V;
+
+    // Ignore X * 2.0 because that is expected to be canonicalized to X + X.
+    if (auto *C = isConstOrConstSplatFP(Op.getOperand(1)))
+      if (C->isExactlyValue(2.0) && Op.getOpcode() == ISD::FMUL)
+        return 0;
 
     return isNegatibleForFree(Op.getOperand(1), LegalOperations, TLI, Options,
                               ForCodeSize, Depth + 1);
